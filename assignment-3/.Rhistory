install.packages("leaflet")
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/R/ggis-224/crime-data-lab")
setwd("~/Documents/R/ggis-224/crime-data-lab")
# load data
library(sf)
library(tmap)
library(leaflet)
library(data.tables)
library(tmap)
library(leaflet)
library(data.table)
library(tidyverse)
LAcrime<-fread("LAPD2015_Violent.csv", header = T)
head(LAcrime)
# identify unique code
unique(LAcrime$`Crime Code Description`)
# subset data
LAcrime.df<- as.data.frame(LAcrime)
# base R subset
s1<-subset(LAcrime.df,LAcrime.df$`Crime Code Description`== "CRIMINAL HOMICIDE")
# binding rows
LAcrime.hom<-rbind(s1)
head(s1)
# save cleaned data
write.csv(LAcrime.hom,"LAcrime_hom.csv")
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
setwd("~/Documents/R/ggis-224/assignment-3")
library(sf)
library(tmap)
library(leaflet)
library(data.table)
library(tidyverse)
devtools::install_github("r-lib/conflicted")
knitr::opts_chunk$set(echo = TRUE)
library(conflicted)
LA-crime <- fread("LA-data/LAPD2015_Violent.csv")
LA-crime <- fread("/LA-data/LAPD2015_Violent.csv")
LA-crime <- fread("~/Documents/R/ggis-224/assignment-3/LA-data/LAPD2015_Violent.csv")
LA-crime <- fread("LAPD2015_Violent.csv")
LA-crime <- fread("~/Documents/R/ggis-224/assignment-3/LA-data LAPD2015_Violent.csv")
LA-crime <- fread("~/Documents/R/ggis-224/assignment-3/LA-data/LAPD2015_Violent.csv")
LA_crime <- fread("LA-data/LAPD2015_Violent.csv")
LA_crime <- fread("LA-data/LAPD2015_Violent.csv")
NYC_crime <- fread("NYC-data/NYPD2015_Violent.csv")
LA_crime <- fread("LA-data/LAPD2015_Violent.csv")
NYC_crime <- fread("NYC-data/NYPD2015_Violent.csv")
head(LA_crime)
head(NYC_crime)
unique(LA_crime$`Crime Code Description`)
head(LA_crime)
head(NYC_crime)
unique(LAcrime$`Crime Code Description`)
unique(LA_crime$`Crime Code Description`)
LA_crime.df <- as.data.frame(LA_crime)
s1 <- subset(LA_crime.df, LA_crime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE")
LAcrime.hom <- rbind(s1)
write.csv(LAcrime.hom,"LAcrime_hom.csv")
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.pts <- st_as_sf(LAcrime.hom, coords = c("longitude","latitude"), crs = 4326)
str(LA_crime.hom[,c("longitude", "latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LA_crime.pts <- st_as_sf(LAcrime.hom, coords = c("longitude","latitude"), crs = 4326)
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LA_crime.pts <- st_as_sf(LAcrime.hom, coords = c("longitude","latitude"), crs = 4326)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) #1 observations
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) #1 observations
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) #1 observations
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
library(sf)
library(tmap)
library(leaflet)
library(data.table)
library(tidyverse)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
xlims <- range(LAcrime.pts$longitude, na.rm = TRUE)
ylims <- range(LAcrime.pts$latitude, na.rm = TRUE)
plot(LAcrime.pts, xlim = xlims, ylim = ylims)
plot(LAcrime.pts)
LAcrime <- fread("LA-data/LAPD2015_Violent.csv")
NYC_crime <- fread("NYC-data/NYPD2015_Violent.csv")
unique(LAcrime$`Crime Code Description`)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE") # base r subset
LAcrime.hom <- rbind(s1)
write.csv(LAcrime.hom,"LAcrime_hom.csv")
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) # observations
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE") # base r subset
LAcrime.hom <- rbind(s1)
write.csv(LAcrime.hom,"LAcrime_hom.csv")
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) # observations
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(tmap)
library(leaflet)
library(data.table)
library(tidyverse)
setwd("~/Documents/R/ggis-224/assignment-3")
LAcrime <- fread("LA-data/LAPD2015_Violent.csv")
NYC_crime <- fread("NYC-data/NYPD2015_Violent.csv")
unique(LAcrime$`Crime Code Description`)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE") # base r subset
LAcrime.hom <- rbind(s1)
write.csv(LAcrime.hom,"LAcrime_hom.csv")
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
plot(LAcrime.pts)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE") # base r subset
LAcrime.hom <- rbind(s1)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMOCIDE") # base r subset
LAcrime.hom <- rbind(s1)
head(s1)
LAcrime.df <- as.data.frame(LAcrime)
s1 <- subset(LAcrime.df, LAcrime.df$`Crime Code Description`=="CRIMINAL HOMICIDE") # base r subset
LAcrime.hom <- rbind(s1)
head(s1)
write.csv(LAcrime.hom,"LAcrime_hom.csv")
glimpse(LAcrime.hom[,c("longitude","latitude")])
str(LAcrime.hom[,c("longitude", "latitude")])
LAcrime.hom$latitude <- as.numeric(LAcrime.hom$latitude)
LAcrime.hom$longitude <- as.numeric(LAcrime.hom$longitude)
LAcrime.hom.na <- subset(LAcrime.hom, is.na(LAcrime.hom[,c("longitude", "latitude")]))
glimpse(LAcrime.hom.na) # observations
LAcrime.hom2 <- na.omit(LAcrime.hom[,c("DR Number","longitude", "latitude")])
str(LAcrime.hom2)
LAcrime.pts <- st_as_sf(LAcrime.hom2, coords = c("longitude","latitude"), crs = 4326)
plot(LAcrime.pts)
LAcrimes <- LAcrime.pts
LAtracts <- st_read("LA-data/LAC_Shape.shp")
## 1st layer (gets plotted first)
tm_shape(LAtracts) + tm_borders(alpha = 0.4) +
## 2nd layer (overlay)
tm_shape(LAcrime.pts) + tm_dots(size = 0.1, col="red")
## 1st layer (gets plotted first)
tm_shape(LAtracts) + tm_borders(alpha = 0.4) +
## 2nd layer (overlay)
tm_shape(LAcrime.pts) + tm_dots(size = 0.1, col="red")
CRS.new <- st_crs(LAtracts)
LAcrimes <- st_transform(LAcrimes, CRS.new)
crime_in_tract <- st_join(LAcrimes, LAtracts, join = st_within)
crime_in_tract <- st_join(LAcrimes, LAtracts, join = st_within)
glimpse(crime_in_tract)
crime_tract_count <- as.data.frame(table(crime_in_tract$TRACTCE10))
glimpse(crime_tract_count)
LAtracts_new <- merge(LAtracts, crime_tract_count, by="TRACTCE10")
names(crime_tract_count) <- c("TRACTCE10","CrimeCt")
glimpse(crime_tract_count)
LAtracts_new <- merge(LAtracts, crime_tract_count, by="TRACTCE10")
glimpse(LAtracts_new)
tm_shape(LAtracts_new) + tm_fill("CrimeCt", n=4, pal = "BuPu", title="LA Homicides in 2015"
tm_shape(LAtracts_new) + tm_fill("CrimeCt", n=4, pal = "BuPu", title="LA Homicides in 2015"
tm_shape(LAtracts_new) + tm_fill("CrimeCt", n=4, pal = "BuPu", title="LA Homicides in 2015")
tmap_mode(view)
m_shape(LAtracts_new) + tm_fill("CrimeCt", n=4, pal = "BuPu", title="LA Homicides in 2015")
tmap_mode("view")
tm_shape(LAtracts_new) + tm_fill("CrimeCt", n=4, pal = "BuPu", title="LA Homicides in 2015")
